import{a as Y,h as Z,k as ee}from"./chunk-TRB5AUNU.js";import{a as ne}from"./chunk-UUIEUFCO.js";import{g as W,h as J,i as v,k as X,p as te,q as ie}from"./chunk-XALAGNMC.js";import{$a as Q,Aa as _,Ea as d,Ha as $,Ja as u,O as N,Oa as m,Ra as C,Sa as O,T as H,Ta as q,Ua as L,Va as o,Wa as a,Xa as c,ab as P,cb as V,db as U,eb as K,fb as g,hb as k,ja as l,jb as z,lb as G,mb as s,n as S,nb as w,ob as h,qa as F,va as j,wa as p,y as A}from"./chunk-GWAPPGSB.js";var se=["priceChartCanvas"],I=class n{constructor(i){this.platformId=i}priceChartCanvas;ctx;prices=l.required();ngAfterViewInit(){X(this.platformId)&&(this.ctx=this.priceChartCanvas.nativeElement.getContext("2d"),this.drawPriceChart(this.prices()))}drawPriceChart(i){if(!this.ctx)return;let e=this.priceChartCanvas.nativeElement,t=e.width,r=e.height,x=Math.min(...i),pe=Math.max(...i)-x;this.ctx.clearRect(0,0,t,r),this.ctx.beginPath(),this.ctx.lineWidth=6;for(let f=0;f<i.length;f++){let R=f/(i.length-1)*t,B=r-(i[f]-x)/pe*r;if(f===0)this.ctx.moveTo(R,B);else{let ce=i[f]>i[f-1]?"#00c951":"#fb2c36";this.ctx.strokeStyle=ce,this.ctx.lineTo(R,B)}}this.ctx.stroke()}static \u0275fac=function(e){return new(e||n)(_(F))};static \u0275cmp=d({type:n,selectors:[["app-price-chart"]],viewQuery:function(e,t){if(e&1&&V(se,5),e&2){let r;U(r=K())&&(t.priceChartCanvas=r.first)}},inputs:{prices:[1,"prices"]},decls:2,vars:0,consts:[["priceChartCanvas",""],[1,"w-12","h-12"]],template:function(e,t){e&1&&c(0,"canvas",1,0)},dependencies:[v],encapsulation:2})};var M=class n{transform(i,e){let t,r=0;return i!==void 0&&e!==void 0?r=(i-e)/e*100:t={isNeutral:!0,percentage:"0%"},r>0?t={isPositive:!0,percentage:`${r.toFixed(2)}%`}:r<0?t={isNegative:!0,percentage:`${r.toFixed(2)}%`}:t={isNeutral:!0,percentage:"0%"},t}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=$({name:"priceChangePercentage",type:n,pure:!0})};var le=(n,i,e)=>({"text-red-500":n,"text-green-500":i,"text-gray-500":e});function de(n,i){n&1&&(o(0,"span"),c(1,"i",1),a())}function fe(n,i){n&1&&(o(0,"span"),c(1,"i",2),a())}function ue(n,i){n&1&&(o(0,"span"),c(1,"i",3),a())}var b=class n{high=l.required();low=l.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-market-price-changes"]],inputs:{high:[1,"high"],low:[1,"low"]},decls:11,vars:25,consts:[[1,"w-full","text-sm","text-end","flex","align-center","justify-end","gap-1",3,"ngClass"],[1,"fa","fa-caret-up"],[1,"fa","fa-caret-down"],[1,"fa","fa-minus"]],template:function(e,t){e&1&&(o(0,"p",0),s(1,"priceChangePercentage"),s(2,"priceChangePercentage"),s(3,"priceChangePercentage"),g(4),s(5,"priceChangePercentage"),u(6,de,2,0,"span"),s(7,"priceChangePercentage"),s(8,"priceChangePercentage"),u(9,fe,2,0,"span")(10,ue,2,0,"span"),a()),e&2&&(m("ngClass",G(21,le,h(1,3,t.high(),t.low()).isNegative,h(2,6,t.high(),t.low()).isPositive,h(3,9,t.high(),t.low()).isNeutral)),p(4),k(" ",h(5,12,t.high(),t.low()).percentage," "),p(2),C(h(7,15,t.high(),t.low()).isPositive?6:h(8,18,t.high(),t.low()).isNegative?9:10))},dependencies:[v,W,M],encapsulation:2})};var he=()=>[];function Ce(n,i){if(n&1&&c(0,"app-price-chart",7),n&2){let e,t=P();m("prices",((e=t.market().sparkline_in_7d)==null?null:e.price)||z(1,he))}}var E=class n{market=l.required();currency=l.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-market-card"]],inputs:{market:[1,"market"],currency:[1,"currency"]},decls:15,vars:10,consts:[[1,"w-full","grid","grid-cols-5","rounded-2xl","p-3","shadow-md","cursor-pointer","secoundary-bg--color"],[1,"col-span-1"],[1,"w-12","h-12","rounded-full","p-1",3,"src","alt"],[1,"col-span-2","flex","flex-wrap"],[1,"w-full","text-xl","font-medium","secoundary-color"],[1,"w-full","text-sm","secoundary-color"],[1,"col-span-1","flex","flex-wrap"],[1,"w-full",3,"prices"],[1,"w-full","text-slate-800","dark:text-white","text-end"],[1,"w-full",3,"high","low"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"div",1),c(2,"img",2),a(),o(3,"div",3)(4,"p",4),g(5),a(),o(6,"p",5),g(7),a()(),o(8,"div",6),u(9,Ce,1,2,"app-price-chart",7),a(),o(10,"div",6)(11,"p",8),g(12),s(13,"number"),a(),c(14,"app-market-price-changes",9),a()()),e&2){let r;p(2),m("src",t.market().image,j)("alt",t.market().id),p(3),k(" ",t.market().name," "),p(2),k(" ",t.currency()," "),p(2),C((r=t.market().sparkline_in_7d)!=null&&r.price?9:-1),p(3),k(" ",w(13,8,t.market().current_price)," $ "),p(2),m("high",t.market().high_24h)("low",t.market().low_24h)}},dependencies:[v,J,b,I],encapsulation:2})};var re="https://api.coingecko.com/api/v3/simple/price",ae="https://api.coingecko.com/api/v3/coins/markets";var T=class n{constructor(i){this.http=i}getPrice(i,e="usd"){return this.http.get(re+`?ids=${i}&vs_currencies=${e}`).pipe(A(t=>S(t)))}getMarkets(i="usd",e=!1,t=1){return this.http.get(ae+`?vs_currency=${i}&order=market_cap_desc&per_page=5&page=${t}&sparkline=${e}`).pipe(A(r=>S(r)))}static \u0275fac=function(e){return new(e||n)(H(Y))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function ke(n,i){if(n&1&&c(0,"app-market-card",2),n&2){let e=i.$implicit,t=P(2);m("market",e)("currency",t.currency)}}function ve(n,i){if(n&1&&(o(0,"div",1),q(1,ke,1,2,"app-market-card",2,O),a()),n&2){let e=P();p(),L(e.markets)}}var oe=class n{constructor(i,e){this._router=i;this._coinEckoService=e}markets=[];currency="usd";loading=!0;ngOnInit(){this._coinEckoService.getMarkets(this.currency,!0).subscribe(i=>{this.markets=i,this.markets.forEach(e=>{e.sparkline_in_7d&&(e.sparkline_in_7d.price=e.sparkline_in_7d?.price?.slice(0,10))}),this.loading=!1})}headerButtonClicked(i){i==="HEADER_CALCULATE"&&this._router.navigate([ee])}static \u0275fac=function(e){return new(e||n)(_(Z),_(T))};static \u0275cmp=d({type:n,selectors:[["app-home"]],decls:3,vars:4,consts:[[3,"actionButtonClicked","title"],[1,"w-full","flex","flex-wrap","mt-4"],[1,"w-full","mb-3",3,"market","currency"]],template:function(e,t){e&1&&(o(0,"app-header",0),s(1,"translate"),Q("actionButtonClicked",function(x){return t.headerButtonClicked(x)}),a(),u(2,ve,3,0,"div",1)),e&2&&(m("title",w(1,2,"HOME_HEADER")),p(2),C(t.loading?-1:2))},dependencies:[ne,ie,te,E],encapsulation:2})};export{oe as HomeComponent};
