import{b as ee,e as te}from"./chunk-7H2YKO7F.js";import{c as ie,d as ne}from"./chunk-MK2HO36T.js";import{a as oe}from"./chunk-MQV4CJWY.js";import{j as T}from"./chunk-7HHI6YDF.js";import{a as re}from"./chunk-GIQTAER3.js";import{g as D,h as v,i as _,k as Z}from"./chunk-L4ZBA2CZ.js";import{Aa as l,Ea as s,Ha as w,Ja as M,Oa as m,Qa as V,Ra as b,Ta as U,Ua as z,Va as G,Wa as p,Xa as c,Ya as a,ab as I,bb as y,db as $,eb as W,fb as Y,gb as g,ib as x,ja as C,jb as J,kb as K,lb as E,ma as P,mb as f,nb as d,ob as X,qa as q,va as Q,wa as o}from"./chunk-SX66N3MW.js";var me=["priceChartCanvas"],R=class i{constructor(t){this.platformId=t}priceChartCanvas;ctx;prices=C.required();ngAfterViewInit(){Z(this.platformId)&&(this.ctx=this.priceChartCanvas.nativeElement.getContext("2d"),this.drawPriceChart(this.prices()))}drawPriceChart(t){if(!this.ctx)return;let e=this.priceChartCanvas.nativeElement,n=e.width,r=e.height,u=Math.min(...t),ce=Math.max(...t)-u;this.ctx.clearRect(0,0,n,r),this.ctx.beginPath(),this.ctx.lineWidth=6;for(let h=0;h<t.length;h++){let L=h/(t.length-1)*n,j=r-(t[h]-u)/ce*r;if(h===0)this.ctx.moveTo(L,j);else{let se=t[h]>t[h-1]?"#00c951":"#fb2c36";this.ctx.strokeStyle=se,this.ctx.lineTo(L,j)}}this.ctx.stroke()}static \u0275fac=function(e){return new(e||i)(l(q))};static \u0275cmp=s({type:i,selectors:[["app-price-chart"]],viewQuery:function(e,n){if(e&1&&$(me,5),e&2){let r;W(r=Y())&&(n.priceChartCanvas=r.first)}},inputs:{prices:[1,"prices"]},decls:2,vars:0,consts:[["priceChartCanvas",""],[1,"w-12","h-12"]],template:function(e,n){e&1&&a(0,"canvas",1,0)},dependencies:[_],encapsulation:2})};var F=class i{constructor(t){this._decimalPipe=t}transform(t){return t?Math.sign(t)===-1?{positive:!1,value:this._decimalPipe.transform(Math.abs(t),"1.0-2")}:{positive:!0,value:this._decimalPipe.transform(Math.abs(t),"1.0-2")}:null}static \u0275fac=function(e){return new(e||i)(l(v,16))};static \u0275pipe=w({name:"marketPriceChange",type:i,pure:!0})};var le=i=>({"!text-green-500":i}),B=class i{percentage=C.required();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-market-price-changes"]],inputs:{percentage:[1,"percentage"]},features:[J([v])],decls:6,vars:12,consts:[[1,"w-full","text-sm","text-end","flex","align-center","justify-end","gap-1","text-red-500",3,"ngClass"]],template:function(e,n){if(e&1&&(p(0,"p",0),f(1,"marketPriceChange"),g(2),f(3,"marketPriceChange"),a(4,"span"),f(5,"marketPriceChange"),c()),e&2){let r,u,H;m("ngClass",E(10,le,(r=d(1,4,n.percentage()))==null?null:r.positive)),o(2),x(" ",(u=d(3,6,n.percentage()))==null?null:u.value," "),o(2),V("icon "+((H=d(5,8,n.percentage()))!=null&&H.positive?"arrow-up text-green-500":"arrow-down text-red-500"))}},dependencies:[_,D,F],styles:["p[_ngcontent-%COMP%]{line-height:1}"]})};var de=i=>({"cursor-pointer":i}),ue=()=>[];function he(i,t){if(i&1&&a(0,"app-price-chart",7),i&2){let e,n=y();m("prices",((e=n.market().sparkline_in_7d)==null?null:e.price)||K(1,ue))}}var O=class i{constructor(t){this._router=t}market=C.required();currency=C.required();displayDetail=P(!1);detail(){this.displayDetail()&&this._router.navigate([te,this.market().id])}static \u0275fac=function(e){return new(e||i)(l(T))};static \u0275cmp=s({type:i,selectors:[["app-market-card"]],inputs:{market:[1,"market"],currency:[1,"currency"]},decls:15,vars:12,consts:[[1,"w-full","grid","grid-cols-6","rounded-2xl","p-3","shadow-md","secoundary-bg--color",3,"click","ngClass"],[1,"col-span-1"],[1,"w-12","h-12","rounded-full","p-1",3,"src","alt"],[1,"col-span-2","flex","flex-wrap"],[1,"w-full","text-xl","font-medium","secoundary-color"],[1,"w-full","text-sm","secoundary-color"],[1,"col-span-1","flex","flex-wrap"],[1,"w-full",3,"prices"],[1,"w-full","text-slate-800","dark:text-white","text-end"],[1,"w-full",3,"percentage"]],template:function(e,n){if(e&1&&(p(0,"div",0),I("click",function(){return n.detail()}),p(1,"div",1),a(2,"img",2),c(),p(3,"div",3)(4,"p",4),g(5),c(),p(6,"p",5),g(7),c()(),p(8,"div",6),M(9,he,1,2,"app-price-chart",7),c(),p(10,"div",3)(11,"p",8),g(12),f(13,"number"),c(),a(14,"app-market-price-changes",9),c()()),e&2){let r;m("ngClass",E(10,de,n.displayDetail())),o(2),m("src",n.market().image,Q)("alt",n.market().id),o(3),x(" ",n.market().name," "),o(2),x(" ",n.currency()," "),o(2),b((r=n.market().sparkline_in_7d)!=null&&r.price?9:-1),o(3),x(" ",d(13,8,n.market().current_price)," $ "),o(2),m("percentage",n.market().price_change_percentage_24h)}},dependencies:[_,D,v,B,R],encapsulation:2})};var A=class i{transform(t,e){return t.forEach(n=>{n.sparkline_in_7d&&(n.sparkline_in_7d.price=n.sparkline_in_7d?.price?.slice(0,e))}),t}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=w({name:"marketSparkline",type:i,pure:!0})};var N=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=s({type:i,selectors:[["app-loading"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(e,n){e&1&&a(0,"span",0)},styles:["[_nghost-%COMP%]{height:100dvh;display:flex;align-items:center}.loader[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:block;margin:15px auto;position:relative;color:#fff;left:-100px;box-sizing:border-box;animation:_ngcontent-%COMP%_shadowRolling 2s linear infinite}@keyframes _ngcontent-%COMP%_shadowRolling{0%{box-shadow:0 0 #fff0,0 0 #fff0,0 0 #fff0,0 0 #fff0}12%{box-shadow:100px 0 #fff,0 0 #fff0,0 0 #fff0,0 0 #fff0}25%{box-shadow:110px 0 #fff,100px 0 #fff,0 0 #fff0,0 0 #fff0}36%{box-shadow:120px 0 #fff,110px 0 #fff,100px 0 #fff,0 0 #fff0}50%{box-shadow:130px 0 #fff,120px 0 #fff,110px 0 #fff,100px 0 #fff}62%{box-shadow:200px 0 #fff0,130px 0 #fff,120px 0 #fff,110px 0 #fff}75%{box-shadow:200px 0 #fff0,200px 0 #fff0,130px 0 #fff,120px 0 #fff}87%{box-shadow:200px 0 #fff0,200px 0 #fff0,200px 0 #fff0,130px 0 #fff}to{box-shadow:200px 0 #fff0,200px 0 #fff0,200px 0 #fff0,200px 0 #fff0}}"]})};function Ce(i,t){if(i&1&&a(0,"app-market-card",2),i&2){let e=t.$implicit,n=y(2);m("market",e)("currency",n.currency)}}function ge(i,t){if(i&1&&(p(0,"div",1),z(1,Ce,1,2,"app-market-card",2,U),f(3,"marketSparkline"),c()),i&2){let e=y();o(),G(X(3,0,e.markets(),10))}}function xe(i,t){i&1&&a(0,"app-loading")}var pe=class i{constructor(t,e){this._router=t;this._coinEckoService=e}markets=P([]);currency="usd";loading=!0;ngOnInit(){this._coinEckoService.getMarkets(this.currency,!0).subscribe(t=>{this.markets.set(t),this.loading=!1})}headerButtonClicked(t){t==="HEADER_CALCULATE"&&this._router.navigate([ee])}static \u0275fac=function(e){return new(e||i)(l(T),l(oe))};static \u0275cmp=s({type:i,selectors:[["app-home"]],decls:4,vars:4,consts:[[3,"actionButtonClicked","title"],[1,"w-full","flex","flex-wrap","mt-4"],[1,"w-full","mb-3",3,"market","currency"]],template:function(e,n){e&1&&(p(0,"app-header",0),f(1,"translate"),I("actionButtonClicked",function(u){return n.headerButtonClicked(u)}),c(),M(2,ge,4,3,"div",1)(3,xe,1,0,"app-loading")),e&2&&(m("title",d(1,2,"HOME_HEADER")),o(2),b(n.loading?3:2))},dependencies:[re,ne,ie,O,A,N],styles:["[_nghost-%COMP%]{height:100dvh;display:flex;width:100%;flex-direction:column}"]})};export{pe as HomeComponent};
