import{a as ee,i as te,l as ie}from"./chunk-JIZFAB5K.js";import{a as ae}from"./chunk-KPY7AYRN.js";import{g as J,h as X,i as k,k as Y,p as ne,q as re}from"./chunk-5FQXSAJU.js";import{Aa as y,Ea as u,Ha as w,Ja as h,O as H,Oa as s,Ra as g,T as j,Ta as L,Ua as Q,Va as V,Wa as o,Xa as a,Ya as c,ab as U,bb as P,db as Z,eb as K,fb as z,gb as C,ib as _,ja as d,kb as G,ma as O,mb as W,n as D,nb as m,ob as I,pb as l,qa as q,va as $,wa as p,y as F}from"./chunk-BHXDYY2Z.js";var se=["priceChartCanvas"],M=class n{constructor(i){this.platformId=i}priceChartCanvas;ctx;prices=d.required();ngAfterViewInit(){Y(this.platformId)&&(this.ctx=this.priceChartCanvas.nativeElement.getContext("2d"),this.drawPriceChart(this.prices()))}drawPriceChart(i){if(!this.ctx)return;let e=this.priceChartCanvas.nativeElement,t=e.width,r=e.height,x=Math.min(...i),ce=Math.max(...i)-x;this.ctx.clearRect(0,0,t,r),this.ctx.beginPath(),this.ctx.lineWidth=6;for(let f=0;f<i.length;f++){let R=f/(i.length-1)*t,N=r-(i[f]-x)/ce*r;if(f===0)this.ctx.moveTo(R,N);else{let me=i[f]>i[f-1]?"#00c951":"#fb2c36";this.ctx.strokeStyle=me,this.ctx.lineTo(R,N)}}this.ctx.stroke()}static \u0275fac=function(e){return new(e||n)(y(q))};static \u0275cmp=u({type:n,selectors:[["app-price-chart"]],viewQuery:function(e,t){if(e&1&&Z(se,5),e&2){let r;K(r=z())&&(t.priceChartCanvas=r.first)}},inputs:{prices:[1,"prices"]},decls:2,vars:0,consts:[["priceChartCanvas",""],[1,"w-12","h-12"]],template:function(e,t){e&1&&c(0,"canvas",1,0)},dependencies:[k],encapsulation:2})};var b=class n{transform(i,e){let t,r=0;return i!==void 0&&e!==void 0?r=(i-e)/e*100:t={isNeutral:!0,percentage:"0%"},r>0?t={isPositive:!0,percentage:`${r.toFixed(2)}%`}:r<0?t={isNegative:!0,percentage:`${r.toFixed(2)}%`}:t={isNeutral:!0,percentage:"0%"},t}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=w({name:"priceChangePercentage",type:n,pure:!0})};var de=(n,i,e)=>({"text-red-500":n,"text-green-500":i,"text-gray-500":e});function ue(n,i){n&1&&(o(0,"span"),c(1,"i",1),a())}function fe(n,i){n&1&&(o(0,"span"),c(1,"i",2),a())}function he(n,i){n&1&&(o(0,"span"),c(1,"i",3),a())}var E=class n{high=d.required();low=d.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-market-price-changes"]],inputs:{high:[1,"high"],low:[1,"low"]},decls:11,vars:25,consts:[[1,"w-full","text-sm","text-end","flex","align-center","justify-end","gap-1",3,"ngClass"],[1,"fa","fa-caret-up"],[1,"fa","fa-caret-down"],[1,"fa","fa-minus"]],template:function(e,t){e&1&&(o(0,"p",0),m(1,"priceChangePercentage"),m(2,"priceChangePercentage"),m(3,"priceChangePercentage"),C(4),m(5,"priceChangePercentage"),h(6,ue,2,0,"span"),m(7,"priceChangePercentage"),m(8,"priceChangePercentage"),h(9,fe,2,0,"span")(10,he,2,0,"span"),a()),e&2&&(s("ngClass",W(21,de,l(1,3,t.high(),t.low()).isNegative,l(2,6,t.high(),t.low()).isPositive,l(3,9,t.high(),t.low()).isNeutral)),p(4),_(" ",l(5,12,t.high(),t.low()).percentage," "),p(2),g(l(7,15,t.high(),t.low()).isPositive?6:l(8,18,t.high(),t.low()).isNegative?9:10))},dependencies:[k,J,b],encapsulation:2})};var ge=()=>[];function Ce(n,i){if(n&1&&c(0,"app-price-chart",7),n&2){let e,t=P();s("prices",((e=t.market().sparkline_in_7d)==null?null:e.price)||G(1,ge))}}var T=class n{market=d.required();currency=d.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-market-card"]],inputs:{market:[1,"market"],currency:[1,"currency"]},decls:15,vars:10,consts:[[1,"w-full","grid","grid-cols-5","rounded-2xl","p-3","shadow-md","cursor-pointer","secoundary-bg--color"],[1,"col-span-1"],[1,"w-12","h-12","rounded-full","p-1",3,"src","alt"],[1,"col-span-2","flex","flex-wrap"],[1,"w-full","text-xl","font-medium","secoundary-color"],[1,"w-full","text-sm","secoundary-color"],[1,"col-span-1","flex","flex-wrap"],[1,"w-full",3,"prices"],[1,"w-full","text-slate-800","dark:text-white","text-end"],[1,"w-full",3,"high","low"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"div",1),c(2,"img",2),a(),o(3,"div",3)(4,"p",4),C(5),a(),o(6,"p",5),C(7),a()(),o(8,"div",6),h(9,Ce,1,2,"app-price-chart",7),a(),o(10,"div",6)(11,"p",8),C(12),m(13,"number"),a(),c(14,"app-market-price-changes",9),a()()),e&2){let r;p(2),s("src",t.market().image,$)("alt",t.market().id),p(3),_(" ",t.market().name," "),p(2),_(" ",t.currency()," "),p(2),g((r=t.market().sparkline_in_7d)!=null&&r.price?9:-1),p(3),_(" ",I(13,8,t.market().current_price)," $ "),p(2),s("high",t.market().high_24h)("low",t.market().low_24h)}},dependencies:[k,X,E,M],encapsulation:2})};var S=class n{transform(i,e){return i.forEach(t=>{t.sparkline_in_7d&&(t.sparkline_in_7d.price=t.sparkline_in_7d?.price?.slice(0,e))}),i}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=w({name:"marketSparkline",type:n,pure:!0})};var oe="https://api.coingecko.com/api/v3/simple/price";var A=class n{constructor(i){this.http=i}getPrice(i,e="usd"){return this.http.get(oe+`?ids=${i}&vs_currencies=${e}`).pipe(F(t=>D(t)))}getMarkets(i="usd",e=!1,t=1){return D([{id:"tether",symbol:"usdt",name:"Tether",image:"https://coin-images.coingecko.com/coins/images/325/large/Tether.png?1696501661",current_price:1,market_cap:141184057767,market_cap_rank:3,fully_diluted_valuation:141184057767,total_volume:59540925995,high_24h:1,low_24h:1,price_change_24h:515e-8,price_change_percentage_24h:52e-5,market_cap_change_24h:688874496,market_cap_change_percentage_24h:.49032,circulating_supply:1411668691948698e-4,total_supply:1411668691948698e-4,max_supply:null,ath:1.32,ath_change_percentage:-24.40557,ath_date:"2018-07-24T00:00:00.000Z",atl:.572521,atl_change_percentage:74.69864,atl_date:"2015-03-02T00:00:00.000Z",roi:null,last_updated:"2025-02-06T19:58:56.918Z",sparkline_in_7d:{price:[.9999905136594186,1.0001070708551734,1.0000414908178115,1.000192083599465,1.0001088439846098,1.0001196908309935,1.000097883254083,1.000038608453777,1.0000397655239979,1.0000481563009116,.9999406691598911]}}])}static \u0275fac=function(e){return new(e||n)(j(ee))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function ke(n,i){if(n&1&&c(0,"app-market-card",2),n&2){let e=i.$implicit,t=P(2);s("market",e)("currency",t.currency)}}function ve(n,i){if(n&1&&(o(0,"div",1),Q(1,ke,1,2,"app-market-card",2,L),m(3,"marketSparkline"),a()),n&2){let e=P();p(),V(l(3,0,e.markets(),10))}}var pe=class n{constructor(i,e){this._router=i;this._coinEckoService=e}markets=O([]);currency="usd";loading=!0;ngOnInit(){this._coinEckoService.getMarkets(this.currency,!0).subscribe(i=>{this.markets.set(i),this.loading=!1})}headerButtonClicked(i){i==="HEADER_CALCULATE"&&this._router.navigate([ie])}static \u0275fac=function(e){return new(e||n)(y(te),y(A))};static \u0275cmp=u({type:n,selectors:[["app-home"]],decls:3,vars:4,consts:[[3,"actionButtonClicked","title"],[1,"w-full","flex","flex-wrap","mt-4"],[1,"w-full","mb-3",3,"market","currency"]],template:function(e,t){e&1&&(o(0,"app-header",0),m(1,"translate"),U("actionButtonClicked",function(x){return t.headerButtonClicked(x)}),a(),h(2,ve,4,3,"div",1)),e&2&&(s("title",I(1,2,"HOME_HEADER")),p(2),g(t.loading?-1:2))},dependencies:[ae,re,ne,T,S],encapsulation:2})};export{pe as HomeComponent};
