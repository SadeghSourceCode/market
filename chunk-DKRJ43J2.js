import{a as X,i as Y,l as ee}from"./chunk-JIZFAB5K.js";import{a as ne}from"./chunk-KPY7AYRN.js";import{g as G,h as W,i as k,k as J,p as te,q as ie}from"./chunk-5FQXSAJU.js";import{Aa as v,Ea as d,Ha as O,Ja as f,O as N,Oa as m,Ra as g,T as H,Ta as q,Ua as $,Va as L,Wa as o,Xa as a,Ya as c,ab as Q,bb as y,db as V,eb as U,fb as Z,gb as C,ib as _,ja as l,kb as K,mb as z,n as S,nb as s,ob as w,pb as h,qa as F,va as j,wa as p,y as B}from"./chunk-BHXDYY2Z.js";var ce=["priceChartCanvas"],I=class n{constructor(i){this.platformId=i}priceChartCanvas;ctx;prices=l.required();ngAfterViewInit(){J(this.platformId)&&(this.ctx=this.priceChartCanvas.nativeElement.getContext("2d"),this.drawPriceChart(this.prices()))}drawPriceChart(i){if(!this.ctx)return;let e=this.priceChartCanvas.nativeElement,t=e.width,r=e.height,x=Math.min(...i),oe=Math.max(...i)-x;this.ctx.clearRect(0,0,t,r),this.ctx.beginPath(),this.ctx.lineWidth=6;for(let u=0;u<i.length;u++){let D=u/(i.length-1)*t,R=r-(i[u]-x)/oe*r;if(u===0)this.ctx.moveTo(D,R);else{let pe=i[u]>i[u-1]?"#00c951":"#fb2c36";this.ctx.strokeStyle=pe,this.ctx.lineTo(D,R)}}this.ctx.stroke()}static \u0275fac=function(e){return new(e||n)(v(F))};static \u0275cmp=d({type:n,selectors:[["app-price-chart"]],viewQuery:function(e,t){if(e&1&&V(ce,5),e&2){let r;U(r=Z())&&(t.priceChartCanvas=r.first)}},inputs:{prices:[1,"prices"]},decls:2,vars:0,consts:[["priceChartCanvas",""],[1,"w-12","h-12"]],template:function(e,t){e&1&&c(0,"canvas",1,0)},dependencies:[k],encapsulation:2})};var M=class n{transform(i,e){let t,r=0;return i!==void 0&&e!==void 0?r=(i-e)/e*100:t={isNeutral:!0,percentage:"0%"},r>0?t={isPositive:!0,percentage:`${r.toFixed(2)}%`}:r<0?t={isNegative:!0,percentage:`${r.toFixed(2)}%`}:t={isNeutral:!0,percentage:"0%"},t}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=O({name:"priceChangePercentage",type:n,pure:!0})};var me=(n,i,e)=>({"text-red-500":n,"text-green-500":i,"text-gray-500":e});function le(n,i){n&1&&(o(0,"span"),c(1,"i",1),a())}function de(n,i){n&1&&(o(0,"span"),c(1,"i",2),a())}function ue(n,i){n&1&&(o(0,"span"),c(1,"i",3),a())}var b=class n{high=l.required();low=l.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-market-price-changes"]],inputs:{high:[1,"high"],low:[1,"low"]},decls:11,vars:25,consts:[[1,"w-full","text-sm","text-end","flex","align-center","justify-end","gap-1",3,"ngClass"],[1,"fa","fa-caret-up"],[1,"fa","fa-caret-down"],[1,"fa","fa-minus"]],template:function(e,t){e&1&&(o(0,"p",0),s(1,"priceChangePercentage"),s(2,"priceChangePercentage"),s(3,"priceChangePercentage"),C(4),s(5,"priceChangePercentage"),f(6,le,2,0,"span"),s(7,"priceChangePercentage"),s(8,"priceChangePercentage"),f(9,de,2,0,"span")(10,ue,2,0,"span"),a()),e&2&&(m("ngClass",z(21,me,h(1,3,t.high(),t.low()).isNegative,h(2,6,t.high(),t.low()).isPositive,h(3,9,t.high(),t.low()).isNeutral)),p(4),_(" ",h(5,12,t.high(),t.low()).percentage," "),p(2),g(h(7,15,t.high(),t.low()).isPositive?6:h(8,18,t.high(),t.low()).isNegative?9:10))},dependencies:[k,G,M],encapsulation:2})};var fe=()=>[];function he(n,i){if(n&1&&c(0,"app-price-chart",7),n&2){let e,t=y();m("prices",((e=t.market().sparkline_in_7d)==null?null:e.price)||K(1,fe))}}var E=class n{market=l.required();currency=l.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-market-card"]],inputs:{market:[1,"market"],currency:[1,"currency"]},decls:15,vars:10,consts:[[1,"w-full","grid","grid-cols-5","rounded-2xl","p-3","shadow-md","cursor-pointer","secoundary-bg--color"],[1,"col-span-1"],[1,"w-12","h-12","rounded-full","p-1",3,"src","alt"],[1,"col-span-2","flex","flex-wrap"],[1,"w-full","text-xl","font-medium","secoundary-color"],[1,"w-full","text-sm","secoundary-color"],[1,"col-span-1","flex","flex-wrap"],[1,"w-full",3,"prices"],[1,"w-full","text-slate-800","dark:text-white","text-end"],[1,"w-full",3,"high","low"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"div",1),c(2,"img",2),a(),o(3,"div",3)(4,"p",4),C(5),a(),o(6,"p",5),C(7),a()(),o(8,"div",6),f(9,he,1,2,"app-price-chart",7),a(),o(10,"div",6)(11,"p",8),C(12),s(13,"number"),a(),c(14,"app-market-price-changes",9),a()()),e&2){let r;p(2),m("src",t.market().image,j)("alt",t.market().id),p(3),_(" ",t.market().name," "),p(2),_(" ",t.currency()," "),p(2),g((r=t.market().sparkline_in_7d)!=null&&r.price?9:-1),p(3),_(" ",w(13,8,t.market().current_price)," $ "),p(2),m("high",t.market().high_24h)("low",t.market().low_24h)}},dependencies:[k,W,b,I],encapsulation:2})};var re="https://api.coingecko.com/api/v3/simple/price";var T=class n{constructor(i){this.http=i}getPrice(i,e="usd"){return this.http.get(re+`?ids=${i}&vs_currencies=${e}`).pipe(B(t=>S(t)))}getMarkets(i="usd",e=!1,t=1){return S([{id:"tether",symbol:"usdt",name:"Tether",image:"https://coin-images.coingecko.com/coins/images/325/large/Tether.png?1696501661",current_price:1,market_cap:141184057767,market_cap_rank:3,fully_diluted_valuation:141184057767,total_volume:59540925995,high_24h:1,low_24h:1,price_change_24h:515e-8,price_change_percentage_24h:52e-5,market_cap_change_24h:688874496,market_cap_change_percentage_24h:.49032,circulating_supply:1411668691948698e-4,total_supply:1411668691948698e-4,max_supply:null,ath:1.32,ath_change_percentage:-24.40557,ath_date:"2018-07-24T00:00:00.000Z",atl:.572521,atl_change_percentage:74.69864,atl_date:"2015-03-02T00:00:00.000Z",roi:null,last_updated:"2025-02-06T19:58:56.918Z",sparkline_in_7d:{price:[.9999905136594186,1.0001070708551734,1.0000414908178115,1.000192083599465,1.0001088439846098,1.0001196908309935,1.000097883254083,1.000038608453777,1.0000397655239979,1.0000481563009116,.9999406691598911]}}])}static \u0275fac=function(e){return new(e||n)(H(X))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ce(n,i){if(n&1&&c(0,"app-market-card",2),n&2){let e=i.$implicit,t=y(2);m("market",e)("currency",t.currency)}}function _e(n,i){if(n&1&&(o(0,"div",1),$(1,Ce,1,2,"app-market-card",2,q),a()),n&2){let e=y();p(),L(e.markets)}}var ae=class n{constructor(i,e){this._router=i;this._coinEckoService=e}markets=[];currency="usd";loading=!0;ngOnInit(){this._coinEckoService.getMarkets(this.currency,!0).subscribe(i=>{this.markets=i,this.markets.forEach(e=>{e.sparkline_in_7d&&(e.sparkline_in_7d.price=e.sparkline_in_7d?.price?.slice(0,10))}),this.loading=!1})}headerButtonClicked(i){i==="HEADER_CALCULATE"&&this._router.navigate([ee])}static \u0275fac=function(e){return new(e||n)(v(Y),v(T))};static \u0275cmp=d({type:n,selectors:[["app-home"]],decls:3,vars:4,consts:[[3,"actionButtonClicked","title"],[1,"w-full","flex","flex-wrap","mt-4"],[1,"w-full","mb-3",3,"market","currency"]],template:function(e,t){e&1&&(o(0,"app-header",0),s(1,"translate"),Q("actionButtonClicked",function(x){return t.headerButtonClicked(x)}),a(),f(2,_e,3,0,"div",1)),e&2&&(m("title",w(1,2,"HOME_HEADER")),p(2),g(t.loading?-1:2))},dependencies:[ne,ie,te,E],encapsulation:2})};export{ae as HomeComponent};
